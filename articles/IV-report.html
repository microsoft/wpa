<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to identify potential predictors for survey results using information value • wpa</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><script src="../extra.js"></script><meta property="og:title" content="How to identify potential predictors for survey results using information value">
<meta property="og:description" content="wpa">
<meta property="og:image" content="https://microsoft.github.io/wpa/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">wpa</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.6.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Analyst Guide
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../analyst_guide.html">Introduction</a>
    </li>
    <li>
      <a href="../analyst_guide_getting_started.html">Getting Started</a>
    </li>
    <li>
      <a href="../analyst_guide_data_validation.html">Data Validation</a>
    </li>
    <li>
      <a href="../analyst_guide_summary.html">Summary Functions</a>
    </li>
    <li>
      <a href="../analyst_guide_distribution.html">Distribution Functions</a>
    </li>
    <li>
      <a href="../analyst_guide_trend.html">Trend Functions</a>
    </li>
    <li>
      <a href="../analyst_guide_network.html">Network Functions</a>
    </li>
    <li>
      <a href="../analyst_guide_reports.html">Reports</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html">Functions</a>
    </li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
    <li>
      <a href="../faq.html">FAQ</a>
    </li>
  </ul>
</li>
<li>
  <a href="../playbook_intro.html">Playbook</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Contribute
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../CONTRIBUTING.html">Contributor Guide</a>
    </li>
    <li>
      <a href="../developer_guide.html">Developer Guide</a>
    </li>
    <li>
      <a href="../reporting_security_issues.html">Reporting Security Issues</a>
    </li>
    <li>
      <a href="../package_structure.html">Package Structure</a>
    </li>
    <li>
      <a href="../contributors.html">Contributors</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro-to-wpa.html">Introduction to {wpa}</a>
    </li>
    <li>
      <a href="../articles/text-mining-capabilities.html">Text-mining Meeting Subject lines</a>
    </li>
    <li>
      <a href="../articles/best-practices.html">Best Practices when using wpa</a>
    </li>
    <li>
      <a href="../articles/IV-report.html">Introduction to Information Value</a>
    </li>
    <li>
      <a href="../articles/Change-over-time.html">Identifying changes over time</a>
    </li>
    <li>
      <a href="../articles/profiles-with-rank.html">Identifying noteworthy groups with rank functions</a>
    </li>
    <li>
      <a href="../articles/network-analysis.html">Introduction to Organizational Network Analysis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/microsoft/wpa/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="IV-report_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>How to identify potential predictors for survey results using information value</h1>
                        <h4 data-toc-skip class="author">Simone Liebal</h4>
            
            <h4 data-toc-skip class="date">2020-11-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/microsoft/wpa/blob/HEAD/vignettes/IV-report.Rmd" class="external-link"><code>vignettes/IV-report.Rmd</code></a></small>
      <div class="hidden name"><code>IV-report.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="about">About<a class="anchor" aria-label="anchor" href="#about"></a>
</h2>
<p>This post will give you a short introduction to the data exploration technique <strong>information Value (IV) </strong> and how to use it as part of the <a href="https://microsoft.github.io/wpa"><strong>wpa</strong> R package</a>.</p>
<p>After setting the stage, we will have a look at how this can be used to identify potential predictors for survey responses.</p>
</div>
<div class="section level2">
<h2 id="what-is-information-value">What is Information Value?<a class="anchor" aria-label="anchor" href="#what-is-information-value"></a>
</h2>
<p><strong>Information Value (IV)</strong> refers to a data exploration technique that helps determine which variables in a dataset have predictive power or influence on the value of a dependent variable. This technique delivers an IV score, which in itself tells you whether one variable <strong>A</strong> is a good predictor for another (say <strong>B</strong>). If <strong>A</strong> has a low information value, it is potentially not be a good predictor for variable <strong>B</strong>, and vice versa. Unlike other methods of measuring relationship between variables, such as correlation or simple linear regression, the IV score is calculated with in terms of how well a specific variable <strong>A</strong> can distinguish between a <em>binary</em> response in a target variable <strong>B</strong>.</p>
<div class="section level3">
<h3 id="or-said-differently">Or said differently:<a class="anchor" aria-label="anchor" href="#or-said-differently"></a>
</h3>
<p>Imagine you have you have a simple yes/no question, e.g. “Are you satisfied with your current work-life-balance?”. The answer to that question, which only has two possible values, is defined as variable <strong>B</strong>, and each value in that variable as <strong>b</strong>. We also have a variable <strong>A</strong>, which is the average weekly total of after-hours collaboration time, and each value in <strong>A</strong> is denoted as <strong>a</strong>.</p>
<p>Let’s assume the values for <strong>a</strong> and <strong>b</strong> are captured for 10000 employees, and are contained in the two variable-columns <strong>A</strong> and <strong>B</strong>. On a row-wise basis, each <strong>a</strong> in <strong>A</strong> links to a <strong>b</strong> in <strong>B</strong>. Based on these values, the information value for <strong>A</strong> can be calculated.</p>
<p>For this purpose, data is separated into different buckets or <em>bins</em>, with the same quantity of data (responses) in each of them. Here we are choosing 5 bins, therefore 20% of responses in each of them.</p>
<p>The numbers and distributions in this example are exaggerated for illustrative purposes:</p>
<table class="table">
<colgroup>
<col width="25%">
<col width="22%">
<col width="25%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="center">Avg. weekly after-hours</th>
<th align="right">Total # of responses</th>
<th align="right"># of negative responses</th>
<th align="right"># of positive responses</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">0-2</td>
<td align="right">2000</td>
<td align="right">200</td>
<td align="right">1800</td>
</tr>
<tr class="even">
<td align="center">2-4</td>
<td align="right">2000</td>
<td align="right">350</td>
<td align="right">1650</td>
</tr>
<tr class="odd">
<td align="center">4-6</td>
<td align="right">2000</td>
<td align="right">800</td>
<td align="right">1200</td>
</tr>
<tr class="even">
<td align="center">6-8</td>
<td align="right">2000</td>
<td align="right">1200</td>
<td align="right">800</td>
</tr>
<tr class="odd">
<td align="center">8-10</td>
<td align="right">2000</td>
<td align="right">1400</td>
<td align="right">600</td>
</tr>
</tbody>
</table>
<p>The information value is then calculated using the following formula:</p>
<p><span class="math display">\[IV=∑(ProportionPositive_i-ProportionNegative_i)*ln(\frac{ProportionPositive_i}{ProportionNegative_i})\]</span></p>
<p>A component in calculating IV is the <strong>Weight of Evidence (WoE)</strong>, which is the logarithmic part within the formula above:</p>
<p><span class="math display">\[WeightOfEvidence=ln(\frac{ProportionPositive_i}{ProportionNegative_i})\]</span></p>
<p>WOE describes the relationship between a <em>predictor variable</em> and a <em>binary target variable</em> for each bin, while IV measures the strength of that total relationship across all the bins.</p>
<p>Applying this to the table above, we get the following:</p>
<table class="table">
<colgroup>
<col width="23%">
<col width="20%">
<col width="23%">
<col width="23%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="center">Avg. weekly after-hours</th>
<th align="right">Total # of responses</th>
<th align="right"># of negative responses</th>
<th align="right"># of positive responses</th>
<th align="right">WOE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">0-2</td>
<td align="right">2000</td>
<td align="right">200</td>
<td align="right">1800</td>
<td align="right">1.438</td>
</tr>
<tr class="even">
<td align="center">2-4</td>
<td align="right">2000</td>
<td align="right">350</td>
<td align="right">1650</td>
<td align="right">0.791</td>
</tr>
<tr class="odd">
<td align="center">4-6</td>
<td align="right">2000</td>
<td align="right">800</td>
<td align="right">1200</td>
<td align="right">-0.354</td>
</tr>
<tr class="even">
<td align="center">6-8</td>
<td align="right">2000</td>
<td align="right">1200</td>
<td align="right">800</td>
<td align="right">-1.165</td>
</tr>
<tr class="odd">
<td align="center">8-10</td>
<td align="right">2000</td>
<td align="right">1400</td>
<td align="right">600</td>
<td align="right">-1.607</td>
</tr>
</tbody>
</table>
<p>The first two bins (<code>0-2</code> and <code>2-4</code>) show a positive WOE value. This means the percentage of <em>positive responses</em> is higher than the percentage of <em>negative responses</em>. For the other three bins (<code>4-6</code>, <code>6-8</code>, and <code>8-10</code>), we can observe a negative WOE value, which means that the percentage of “negative responses” is higher than the percentage of “positive responses”. Therefore, respondents with 0 to 4h in average weekly after-hours seem to answer more positively on the work-life-balance question.</p>
<p>With the WOE calculated, we can apply the full IV calculation to the table:</p>
<table class="table">
<colgroup>
<col width="21%">
<col width="19%">
<col width="21%">
<col width="21%">
<col width="7%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="center">Avg. weekly after-hours</th>
<th align="right">Total # of responses</th>
<th align="right"># of negative responses</th>
<th align="right"># of positive responses</th>
<th align="right">WOE</th>
<th align="right">IV</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">0-2</td>
<td align="right">2000</td>
<td align="right">200</td>
<td align="right">1800</td>
<td align="right">1.438</td>
<td align="right">0.3621</td>
</tr>
<tr class="even">
<td align="center">2-4</td>
<td align="right">2000</td>
<td align="right">350</td>
<td align="right">1650</td>
<td align="right">0.791</td>
<td align="right">0.1309</td>
</tr>
<tr class="odd">
<td align="center">4-6</td>
<td align="right">2000</td>
<td align="right">800</td>
<td align="right">1200</td>
<td align="right">-0.354</td>
<td align="right">0.0331</td>
</tr>
<tr class="even">
<td align="center">6-8</td>
<td align="right">2000</td>
<td align="right">1200</td>
<td align="right">800</td>
<td align="right">-1.165</td>
<td align="right">0.3772</td>
</tr>
<tr class="odd">
<td align="center">8-10</td>
<td align="right">2000</td>
<td align="right">1400</td>
<td align="right">600</td>
<td align="right">-1.607</td>
<td align="right">0.7053</td>
</tr>
</tbody>
</table>
<p>In terms of predictiveness you can use the following table as a reference:</p>
<table class="table">
<thead><tr class="header">
<th align="center">IV value</th>
<th align="center">predictiveness</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">Less than 0.02</td>
<td align="center">Not useful for prediction</td>
</tr>
<tr class="even">
<td align="center">0.02 to 0.1</td>
<td align="center">Weak predictive power</td>
</tr>
<tr class="odd">
<td align="center">0.1 to 0.3</td>
<td align="center">Medium predictive power</td>
</tr>
<tr class="even">
<td align="center">0.3 to 1.0</td>
<td align="center">Strong predictive power</td>
</tr>
<tr class="odd">
<td align="center">&gt; 1.0</td>
<td align="center">Very strong predictive power</td>
</tr>
</tbody>
</table>
<p>Therefore in this example, after-hours seem to have a strong predictive power regarding the answer to “Are you satisfied with your current work-life-balance?”. This data exploration technique builds the foundation for predictor analysis using the <a href="https://microsoft.github.io/wpa"><strong>wpa</strong> R package</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="lets-get-started">Let’s get started<a class="anchor" aria-label="anchor" href="#lets-get-started"></a>
</h2>
<p>As of writing this article, there are two IV functions included as part of the <strong>wpa</strong> R package - <code><a href="../reference/create_IV.html">create_IV()</a></code> and <code><a href="../reference/IV_report.html">IV_report()</a></code>. To run either of those, you will need to ensure that the package has been successfully installed for your version of R. For more information on the installation process, please check out <a href="https://microsoft.github.io/wpa" class="uri">https://microsoft.github.io/wpa</a>.</p>
</div>
<div class="section level2">
<h2 id="putting-it-into-practice">Putting it into practice<a class="anchor" aria-label="anchor" href="#putting-it-into-practice"></a>
</h2>
<div class="section level3">
<h3 id="create_iv-function">
<code>create_IV()</code> function<a class="anchor" aria-label="anchor" href="#create_iv-function"></a>
</h3>
<p>Let’s start with <code><a href="../reference/create_IV.html">create_IV()</a></code>. For data input, the <code><a href="../reference/create_IV.html">create_IV()</a></code> function uses a standard person query dataset. The <strong>wpa</strong> package already brings a set of built-in datasets for testing purposes. The ready-to-use standard person query dataset is called <code>sq_data</code> and will be used for this section of the post.</p>
<p>To get started, open a new session in R and load the following packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/microsoft/wpa/" class="external-link">wpa</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co"># For data manipulation</span></code></pre></div>
<p>The general format looks like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/create_IV.html">create_IV</a></span><span class="op">(</span>
    <span class="va">data</span>, 
    predictors <span class="op">=</span> <span class="cn">NULL</span>, 
    <span class="va">outcome</span>,
    bins <span class="op">=</span> <span class="fl">5</span>, 
    return <span class="op">=</span> <span class="st">"plot"</span><span class="op">)</span></code></pre></div>
<p>At minimum, you need to supply the <code>data</code> argument, which is a Person Query dataset in the form of a data frame and the variable you want to calculate the IV for (<code>outcome</code>) to run the report. If only these two are defined, the remaining arguments will use default values.</p>
<p>Additionally, it’s recommended to use the <code>predictors</code> argument to specify specific columns, that you want to include. Otherwise, all numeric vectors in the data will be included, which might lead to a rather big output.</p>
<p>You can also adjust what the output will look like with the <code>return</code> argument - here you have a choice of:</p>
<ul>
<li>“plot” (returns a bar plot)</li>
<li>“summary” (returns a summary table)</li>
<li>“list” (returns a list of outputs for all input variables)</li>
<li>“plot-WOE” (returns a WOE plot)</li>
</ul>
<p><code>bins</code> allows you to define the amount of same-sized bins the data is separated into.</p>
<p>Using the <code>sq_data</code> dataset, you can have a look at the predictors focus hours, email hours and meeting hours in correlation to collaboration hours:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sq_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>X <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">Collaboration_hours</span> <span class="op">&gt;</span> <span class="fl">12</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/create_IV.html">create_IV</a></span><span class="op">(</span>
        outcome <span class="op">=</span> <span class="st">"X"</span>,
        predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Email_hours"</span>, <span class="st">"Meeting_hours"</span>, <span class="st">"Total_focus_hours"</span><span class="op">)</span>,
        return <span class="op">=</span> <span class="st">"plot"</span><span class="op">)</span></code></pre></div>
<p><img src="IV-report_files/figure-html/unnamed-chunk-3-1.png" width="768"></p>
<p>You may see, that all three are very strong predictors. Initially it might come as a bit of a surprise, that <code>Total_focus_hours</code> is actually the strongest predictor of those three, even though focus hours (in the context of Workplace Analytics) are a block of at least two hours without any meetings - so pretty much the opposite of <code>Collaboration_hours</code>.</p>
<p>This is where WOE comes into play, as it describes the <strong>relationship</strong> between a predictor variable and a binary target variable:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sq_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>X <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">Collaboration_hours</span> <span class="op">&gt;</span> <span class="fl">12</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/create_IV.html">create_IV</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="st">"X"</span>,
    predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Email_hours"</span>, <span class="st">"Meeting_hours"</span>, <span class="st">"Total_focus_hours"</span><span class="op">)</span>,
    return <span class="op">=</span> <span class="st">"plot-WOE"</span><span class="op">)</span>
<span class="co">#&gt; [[1]]</span></code></pre></div>
<p><img src="IV-report_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
<pre><code><span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span></code></pre>
<p><img src="IV-report_files/figure-html/unnamed-chunk-4-2.png" width="768"></p>
<pre><code><span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span></code></pre>
<p><img src="IV-report_files/figure-html/unnamed-chunk-4-3.png" width="768"></p>
<p>You may see, that meeting hours and email hours seem to have direct relationship with collaboration hours:</p>
<ul>
<li><p>Focusing on email hours as an example - we have the buckets with the lower email hours to the left and the higher ones to the right.</p></li>
<li><p>The two buckets on the left have a negative WOE value. This tells us, that less email hours seem to lead to less collaboration hours.</p></li>
<li><p>The two buckets on the right have a positive WOE value. This tells us, that more email hours seem to lead to more collaboration hours.</p></li>
</ul>
<p>But what about the focus hours?</p>
<ul>
<li><p>Focusing on the WOE chart for focus hours above, we can see an inverse relationship. Again, we have low amount of focus hours on the left and high amount of focus hours on the right.</p></li>
<li><p>The two buckets on the left have a strong positive WOE value. So, less focus hours seems to have a correlation with more collaboration hours and vice versa.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="iv_report-function">
<code>IV_report()</code> function<a class="anchor" aria-label="anchor" href="#iv_report-function"></a>
</h3>
<p>Another option is the <code><a href="../reference/IV_report.html">IV_report()</a></code> function, which generates an interactive HTML report, again using Standard Query data as an input. The report contains a full Information Value analysis.</p>
<p>This function follows a similar format as the <code><a href="../reference/create_IV.html">create_IV()</a></code> function above, with the difference that the <code>return</code> is already predefined as an HTML report. Instead it consists of two other additional arguments - <code>path</code>, which defines the file path and the desired file name and <code>timestamp</code>, which is a true/false variable that defines whether to include a time stamp in the file name.</p>
<p>The general format is the following:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/IV_report.html">IV_report</a></span><span class="op">(</span>
    <span class="va">data</span>, 
    predictors <span class="op">=</span> <span class="cn">NULL</span>, 
    <span class="va">outcome</span>, 
    bins <span class="op">=</span> <span class="fl">5</span>, 
    path <span class="op">=</span> <span class="st">"IV_report"</span>, 
    timestamp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="using-the-iv-report-with-survey-results">Using the IV report with survey results<a class="anchor" aria-label="anchor" href="#using-the-iv-report-with-survey-results"></a>
</h2>
<p>The IV report can be leveraged as a powerful option to identify potential predictors for survey responses. In this section we will focus on the non-free-text responses. Our example will use survey responses on a scale from 1-5 (1 being most disagreeable - 5 being most agreeable).</p>
<p>To get started, the survey responses need to uploaded as an additional column (per question) to the organizational file, that is uploaded via the Workplace Analytics portal. You can find more information on the upload of that data <a href="https://docs.microsoft.com/en-us/workplace-analytics/setup/upload-organizational-data" class="external-link">here</a>.</p>
<p>After creating a new standard person query, which includes the new column, the data can be imported using the <code><a href="../reference/import_wpa.html">import_wpa()</a></code> function into a new R session with the above mentioned libraries already imported.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">raw_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_wpa.html">import_wpa</a></span><span class="op">(</span><span class="va">myfile</span><span class="op">)</span></code></pre></div>
<p>The query data might include multiple lines per person per time period. In this example, we only have the current survey responses available. To simplify the analysis, these lines can be grouped by person ID with the result of only having one line per person going forward.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">survey_data</span> <span class="op">&lt;-</span> <span class="va">raw_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">PersonId</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html" class="external-link">summarise_if</a></span><span class="op">(</span><span class="va">is.numeric</span>, <span class="va">mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </code></pre></div>
<div class="section level3">
<h3 id="dealing-with-non-numeric-values">Dealing with non-numeric values<a class="anchor" aria-label="anchor" href="#dealing-with-non-numeric-values"></a>
</h3>
<p>The values used for the creation of IV and IV report need to be numeric. However when uploading the survey responses using the org-data file, these responses might be formatted as a string, even if they seem to be numeric at first glance.</p>
<p>Therefore, they need to be converted:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">survey_data</span><span class="op">$</span><span class="va">survey_response_1</span> <span class="op">&lt;-</span> 
    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">survey_data</span><span class="op">$</span><span class="va">survey_response_1</span> <span class="op">==</span> <span class="st">"5"</span>, <span class="fl">5</span>, 
    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">survey_data</span><span class="op">$</span><span class="va">survey_response_1</span> <span class="op">==</span> <span class="st">"4"</span>, <span class="fl">4</span>, 
    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">survey_data</span><span class="op">$</span><span class="va">survey_response_1</span> <span class="op">==</span> <span class="st">"3"</span>, <span class="fl">3</span>, 
    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">survey_data</span><span class="op">$</span><span class="va">survey_response_1</span> <span class="op">==</span> <span class="st">"2"</span>, <span class="fl">2</span>, 
    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">survey_data</span><span class="op">$</span><span class="va">survey_response_1</span> <span class="op">==</span> <span class="st">"1"</span>, <span class="fl">1</span>, <span class="fl">0</span> <span class="op">)</span> <span class="op">)</span> <span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="convert-answers-into-binary">Convert answers into binary<a class="anchor" aria-label="anchor" href="#convert-answers-into-binary"></a>
</h3>
<p>The <code><a href="../reference/create_IV.html">create_IV()</a></code> and <code><a href="../reference/IV_report.html">IV_report()</a></code> functions require the value of the outcome argument to be binary. A way to approach this can be to convert all agreeable answers into “1” and all disagreeable answers into “0”. In this example, we are working with a scale from 1-5, which allows for a neutral answer with “3”. As this response has limited value for predicting agreeableness or disagreeableness, you can filter this out.</p>
<p>Create an outcome variable by turning survey answers into 1s and 0s (and neutral into 2):</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">survey_data</span><span class="op">$</span><span class="va">my_outcome</span> <span class="op">&lt;-</span> 
    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">survey_data</span><span class="op">$</span><span class="va">survey_response_1</span> <span class="op">==</span> <span class="st">"5"</span>, <span class="fl">1</span>, 
    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">survey_data</span><span class="op">$</span><span class="va">survey_response_1</span> <span class="op">==</span> <span class="st">"4"</span>, <span class="fl">1</span>, 
    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">survey_data</span><span class="op">$</span><span class="va">survey_response_1</span> <span class="op">==</span> <span class="st">"3"</span>, <span class="fl">2</span>, 
    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">survey_data</span><span class="op">$</span><span class="va">survey_response_1</span> <span class="op">==</span> <span class="st">"2"</span>, <span class="fl">0</span>, 
    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">survey_data</span><span class="op">$</span><span class="va">survey_response_1</span> <span class="op">==</span> <span class="st">"1"</span>, <span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span> <span class="op">)</span> <span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Then, you can easily filter out the neutral answers:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">IV_data</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">my_outcome</span><span class="op">&lt;</span><span class="fl">2</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-iv-and-iv-report">Create IV and IV Report<a class="anchor" aria-label="anchor" href="#create-iv-and-iv-report"></a>
</h3>
<p>With all the groundwork being done, you can now create the IV and IV report for this specific question (survey_response_1) to see what WPA metrics might be a predictor for the responses.</p>
<p>To create the IV:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">IV_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/create_IV.html">create_IV</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="st">"my_outcome"</span>, return<span class="op">=</span><span class="st">"list"</span><span class="op">)</span></code></pre></div>
<p>To run the IV report:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">IV_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/IV_report.html">IV_report</a></span><span class="op">(</span>
    outcome <span class="op">=</span> <span class="st">"my_outcome"</span>, 
    path<span class="op">=</span><span class="st">"survey_response_1"</span>, 
    predictors<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Collaboration_hours"</span>, <span class="st">"Call_hours"</span>, <span class="st">"Meeting_hours"</span>, <span class="st">"Instant_Message_hours"</span>, <span class="st">"Email_hours"</span>, <span class="st">"Workweek_span"</span>, <span class="st">"After_hours_instant_messages"</span> ,  <span class="st">"After_hours_in_unscheduled_calls"</span>, <span class="st">"After_hours_collaboration_hours"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>This creates an IV report for the survey_response_1 of the whole population. To dive deeper and identify trends for a specific a population you can apply filters (e.g. <code>LevelDesignation</code>, <code>Organization</code>, etc.) before creating the report.</p>
<p>For example, filtering by <code>LevelDesignation</code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">IV_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">LevelDesignation</span><span class="op">==</span><span class="st">"1"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/IV_report.html">IV_report</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="feedback">Feedback<a class="anchor" aria-label="anchor" href="#feedback"></a>
</h2>
<p>Hope you found this useful! If you have any suggestions or feedback, please visit <a href="https://github.com/microsoft/wpa/issues" class="external-link uri">https://github.com/microsoft/wpa/issues</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Martin Chan, Carlos Morales.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'f45eacc22edb0c386f1f5b9bb89f76be',
    indexName: 'wpa',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
